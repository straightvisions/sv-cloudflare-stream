/*! For license information please see block.build.js.LICENSE.txt */
(()=>{var e={184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var a=typeof r;if("string"===a||"number"===a)e.push(r);else if(Array.isArray(r)){if(r.length){var c=o.apply(null,r);c&&e.push(c)}}else if("object"===a)if(r.toString===Object.prototype.toString)for(var i in r)n.call(r,i)&&r[i]&&e.push(i);else e.push(r.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(r=function(){return o}.apply(t,[]))||(e.exports=r)}()},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function o(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,a){for(var c,i,l=o(e),s=1;s<arguments.length;s++){for(var u in c=Object(arguments[s]))r.call(c,u)&&(l[u]=c[u]);if(t){i=t(c);for(var p=0;p<i.length;p++)n.call(c,i[p])&&(l[i[p]]=c[i[p]])}}return l}},408:(e,t,r)=>{"use strict";var n=r(418),o=60103;if("function"==typeof Symbol&&Symbol.for){var a=Symbol.for;o=a("react.element"),a("react.portal"),a("react.fragment"),a("react.strict_mode"),a("react.profiler"),a("react.provider"),a("react.context"),a("react.forward_ref"),a("react.suspense"),a("react.memo"),a("react.lazy")}"function"==typeof Symbol&&Symbol.iterator;function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var i={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},l={};function s(e,t,r){this.props=e,this.context=t,this.refs=l,this.updater=r||i}function u(){}function p(e,t,r){this.props=e,this.context=t,this.refs=l,this.updater=r||i}s.prototype.isReactComponent={},s.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(c(85));this.updater.enqueueSetState(this,e,t,"setState")},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},u.prototype=s.prototype;var f=p.prototype=new u;f.constructor=p,n(f,s.prototype),f.isPureReactComponent=!0;var d=null,m=Object.prototype.hasOwnProperty,v={key:!0,ref:!0,__self:!0,__source:!0};t.createElement=function(e,t,r){var n,a={},c=null,i=null;if(null!=t)for(n in void 0!==t.ref&&(i=t.ref),void 0!==t.key&&(c=""+t.key),t)m.call(t,n)&&!v.hasOwnProperty(n)&&(a[n]=t[n]);var l=arguments.length-2;if(1===l)a.children=r;else if(1<l){for(var s=Array(l),u=0;u<l;u++)s[u]=arguments[u+2];a.children=s}if(e&&e.defaultProps)for(n in l=e.defaultProps)void 0===a[n]&&(a[n]=l[n]);return{$$typeof:o,type:e,key:c,ref:i,props:a,_owner:d}}},294:(e,t,r)=>{"use strict";e.exports=r(408)}},t={};function r(n){var o=t[n];if(void 0!==o)return o.exports;var a=t[n]={exports:{}};return e[n](a,a.exports,r),a.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(184),t=r.n(e),n=r(294);const o=(0,n.createElement)((e=>{let{className:r,isPressed:o,...a}=e;const c={...a,className:t()(r,{"is-pressed":o})||void 0,"aria-hidden":!0,focusable:!1};return(0,n.createElement)("svg",c)}),{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)((e=>(0,n.createElement)("path",e)),{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"}));function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var c=wp.blob,i=c.getBlobByURL,l=c.isBlobURL,s=wp.components,u=s.BaseControl,p=s.Button,f=s.Disabled,d=s.PanelBody,m=s.Spinner,v=s.withNotices,y=wp.blockEditor,h=y.BlockControls,g=y.BlockIcon,b=y.InspectorControls,w=y.MediaPlaceholder,E=y.MediaUpload,R=y.MediaUploadCheck,S=y.MediaReplaceFlow,k=y.RichText,O=y.useBlockProps,j=y.store,_=wp.element,C=_.useRef,x=_.useEffect,P=wp.i18n,U=P.__,A=P.sprintf,B=wp.compose.useInstanceId,N=wp.data.useSelect;console.log(wp);var I=wp.blocks.createBlock,M=["video"],T=["image"];const L=v((function e(r){var n=r.isSelected,c=r.noticeUI,s=r.attributes,v=r.className,y=r.setAttributes,_=r.insertBlocksAfter,P=(r.onReplace,r.noticeOperations),L=B(e),q=C(),F=C(),V=s.id,z=s.caption,$=s.controls,D=s.poster,H=s.src,W=s.tracks,Y=!V&&l(H),G=N((function(e){return e(j).getSettings().mediaUpload}),[]);function J(e){var t,r;e&&e.url?y({src:e.url,id:e.id,poster:(null===(t=e.image)||void 0===t?void 0:t.src)!==e.icon?null===(r=e.image)||void 0===r?void 0:r.src:void 0}):y({src:void 0,id:void 0,poster:void 0})}function K(e){e!==H&&y({src:e,id:void 0,poster:void 0})}function Q(e){P.removeAllNotices(),P.createErrorNotice(e)}x((function(){if(!V&&l(H)){var e=i(H);e&&G({filesList:[e],onFileChange:function(e){return J((t=e,r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,o,a=[],c=!0,i=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(a.push(n.value),!t||a.length!==t);c=!0);}catch(e){i=!0,o=e}finally{try{c||null==r.return||r.return()}finally{if(i)throw o}}return a}}(t,r)||function(e,t){if(e){if("string"==typeof e)return a(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?a(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]);var t,r},onError:function(e){P.createErrorNotice(e)},allowedTypes:M})}}),[]),x((function(){q.current&&q.current.load()}),[D]);var X=t()(v,{"is-transient":Y}),Z=O({className:X});if(!H)return React.createElement("div",Z,React.createElement(w,{icon:React.createElement(g,{icon:o}),onSelect:J,onSelectURL:K,accept:"video/*",allowedTypes:M,value:s,notices:c,onError:Q}));var ee="video-block__poster-image-description-".concat(L);return React.createElement(React.Fragment,null,React.createElement(h,{group:"block"},React.createElement("./tracks-editor",{tracks:W,onChange:function(e){y({tracks:e})}})),React.createElement(h,{group:"other"},React.createElement(S,{mediaId:V,mediaURL:H,allowedTypes:M,accept:"video/*",onSelect:J,onSelectURL:K,onError:Q})),React.createElement(b,null,React.createElement(d,{title:U("Settings")},React.createElement("./edit-common-settings",{setAttributes:y,attributes:s}),React.createElement(R,null,React.createElement(u,{className:"editor-video-poster-control"},React.createElement(u.VisualLabel,null,U("Poster image")),React.createElement(E,{title:U("Select poster image"),onSelect:function(e){y({poster:e.url})},allowedTypes:T,render:function(e){var t=e.open;return React.createElement(p,{variant:"primary",onClick:t,ref:F,"aria-describedby":ee},U(D?"Replace":"Select"))}}),React.createElement("p",{id:ee,hidden:!0},D?A(U("The current poster image url is %s"),D):U("There is no poster image currently selected")),!!D&&React.createElement(p,{onClick:function(){y({poster:void 0}),F.current.focus()},variant:"tertiary"},U("Remove")))))),React.createElement("figure",Z,React.createElement(f,{isDisabled:!n},React.createElement("video",{controls:$,poster:D,src:H,ref:q},React.createElement("./tracks",{tracks:W}))),Y&&React.createElement(m,null),(!k.isEmpty(z)||n)&&React.createElement(k,{tagName:"figcaption","aria-label":U("Video caption text"),placeholder:U("Add caption"),value:z,onChange:function(e){return y({caption:e})},inlineToolbar:!0,__unstableOnSplitAtEnd:function(){return _(I("core/paragraph"))}})))}));var q=wp.blob.createBlobURL,F=wp.blocks.createBlock;const V={from:[{type:"files",isMatch:function(e){return 1===e.length&&0===e[0].type.indexOf("video/")},transform:function(e){var t=e[0];return F("straightvisions/sv-cloudflare-stream",{src:q(t)})}},{type:"shortcode",tag:"video",attributes:{src:{type:"string",shortcode:function(e){var t=e.named,r=t.src,n=t.mp4,o=t.m4v,a=t.webm,c=t.ogv,i=t.flv;return r||n||o||a||c||i}},poster:{type:"string",shortcode:function(e){return e.named.poster}},loop:{type:"string",shortcode:function(e){return e.named.loop}},autoplay:{type:"string",shortcode:function(e){return e.named.autoplay}},preload:{type:"string",shortcode:function(e){return e.named.preload}}}}]};(0,wp.blocks.registerBlockType)("straightvisions/sv-cloudflare-stream",{title:"SV Cloudflare Stream",example:{attributes:{src:"https://upload.wikimedia.org/wikipedia/commons/c/ca/Wood_thrush_in_Central_Park_switch_sides_%2816510%29.webm",caption:(0,wp.i18n.__)("Wood thrush singing in Central Park, NYC.")}},transforms:V,edit:L,save:function(){return React.createElement("p",null)}})})()})();