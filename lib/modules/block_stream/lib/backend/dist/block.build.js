/*! For license information please see block.build.js.LICENSE.txt */
(()=>{var e={184:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e=[],t=0;t<arguments.length;t++){var r=arguments[t];if(r){var o=typeof r;if("string"===o||"number"===o)e.push(r);else if(Array.isArray(r)){if(r.length){var c=a.apply(null,r);c&&e.push(c)}}else if("object"===o)if(r.toString===Object.prototype.toString)for(var l in r)n.call(r,l)&&r[l]&&e.push(l);else e.push(r.toString())}}return e.join(" ")}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()},418:e=>{"use strict";var t=Object.getOwnPropertySymbols,r=Object.prototype.hasOwnProperty,n=Object.prototype.propertyIsEnumerable;function a(e){if(null==e)throw new TypeError("Object.assign cannot be called with null or undefined");return Object(e)}e.exports=function(){try{if(!Object.assign)return!1;var e=new String("abc");if(e[5]="de","5"===Object.getOwnPropertyNames(e)[0])return!1;for(var t={},r=0;r<10;r++)t["_"+String.fromCharCode(r)]=r;if("0123456789"!==Object.getOwnPropertyNames(t).map((function(e){return t[e]})).join(""))return!1;var n={};return"abcdefghijklmnopqrst".split("").forEach((function(e){n[e]=e})),"abcdefghijklmnopqrst"===Object.keys(Object.assign({},n)).join("")}catch(e){return!1}}()?Object.assign:function(e,o){for(var c,l,i=a(e),s=1;s<arguments.length;s++){for(var u in c=Object(arguments[s]))r.call(c,u)&&(i[u]=c[u]);if(t){l=t(c);for(var p=0;p<l.length;p++)n.call(c,l[p])&&(i[l[p]]=c[l[p]])}}return i}},408:(e,t,r)=>{"use strict";var n=r(418),a=60103;if("function"==typeof Symbol&&Symbol.for){var o=Symbol.for;a=o("react.element"),o("react.portal"),o("react.fragment"),o("react.strict_mode"),o("react.profiler"),o("react.provider"),o("react.context"),o("react.forward_ref"),o("react.suspense"),o("react.memo"),o("react.lazy")}"function"==typeof Symbol&&Symbol.iterator;function c(e){for(var t="https://reactjs.org/docs/error-decoder.html?invariant="+e,r=1;r<arguments.length;r++)t+="&args[]="+encodeURIComponent(arguments[r]);return"Minified React error #"+e+"; visit "+t+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var l={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},i={};function s(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||l}function u(){}function p(e,t,r){this.props=e,this.context=t,this.refs=i,this.updater=r||l}s.prototype.isReactComponent={},s.prototype.setState=function(e,t){if("object"!=typeof e&&"function"!=typeof e&&null!=e)throw Error(c(85));this.updater.enqueueSetState(this,e,t,"setState")},s.prototype.forceUpdate=function(e){this.updater.enqueueForceUpdate(this,e,"forceUpdate")},u.prototype=s.prototype;var d=p.prototype=new u;d.constructor=p,n(d,s.prototype),d.isPureReactComponent=!0;var f=null,m=Object.prototype.hasOwnProperty,v={key:!0,ref:!0,__self:!0,__source:!0};t.createElement=function(e,t,r){var n,o={},c=null,l=null;if(null!=t)for(n in void 0!==t.ref&&(l=t.ref),void 0!==t.key&&(c=""+t.key),t)m.call(t,n)&&!v.hasOwnProperty(n)&&(o[n]=t[n]);var i=arguments.length-2;if(1===i)o.children=r;else if(1<i){for(var s=Array(i),u=0;u<i;u++)s[u]=arguments[u+2];o.children=s}if(e&&e.defaultProps)for(n in i=e.defaultProps)void 0===o[n]&&(o[n]=i[n]);return{$$typeof:a,type:e,key:c,ref:l,props:o,_owner:f}}},294:(e,t,r)=>{"use strict";e.exports=r(408)}},t={};function r(n){var a=t[n];if(void 0!==a)return a.exports;var o=t[n]={exports:{}};return e[n](o,o.exports,r),o.exports}r.n=e=>{var t=e&&e.__esModule?()=>e.default:()=>e;return r.d(t,{a:t}),t},r.d=(e,t)=>{for(var n in t)r.o(t,n)&&!r.o(e,n)&&Object.defineProperty(e,n,{enumerable:!0,get:t[n]})},r.o=(e,t)=>Object.prototype.hasOwnProperty.call(e,t),(()=>{"use strict";var e=r(184),t=r.n(e),n=r(294);const a=e=>(0,n.createElement)("path",e),o=e=>{let{className:r,isPressed:a,...o}=e;const c={...o,className:t()(r,{"is-pressed":a})||void 0,"aria-hidden":!0,focusable:!1};return(0,n.createElement)("svg",c)},c=(0,n.createElement)(o,{viewBox:"0 0 24 24",xmlns:"http://www.w3.org/2000/svg"},(0,n.createElement)(a,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"}));var l=wp.i18n,i=l.__,s=l._x,u=wp.components,p=u.ToggleControl,d=u.SelectControl,f=wp.element,m=f.useMemo,v=f.useCallback,b=f.Platform,y=[{value:"auto",label:i("Auto")},{value:"metadata",label:i("Metadata")},{value:"none",label:s("None","Preload value")}];const h=function(e){var t=e.setAttributes,r=e.attributes,n=r.autoplay,a=r.controls,o=r.loop,c=r.muted,l=r.playsInline,s=r.preload,u=i("Autoplay may cause usability issues for some users."),f=b.select({web:v((function(e){return e?u:null}),[]),native:u}),h=m((function(){var e=function(e){return function(r){var n,a,o;t((o=r,(a=e)in(n={})?Object.defineProperty(n,a,{value:o,enumerable:!0,configurable:!0,writable:!0}):n[a]=o,n))}};return{autoplay:e("autoplay"),loop:e("loop"),muted:e("muted"),controls:e("controls"),playsInline:e("playsInline")}}),[]),g=v((function(e){t({preload:e})}),[]);return React.createElement(React.Fragment,null,React.createElement(p,{label:i("Autoplay"),onChange:h.autoplay,checked:n,help:f}),React.createElement(p,{label:i("Loop"),onChange:h.loop,checked:o}),React.createElement(p,{label:i("Muted"),onChange:h.muted,checked:c}),React.createElement(p,{label:i("Playback controls"),onChange:h.controls,checked:a}),React.createElement(p,{label:i("Play inline"),onChange:h.playsInline,checked:l}),React.createElement(d,{label:i("Preload"),value:s,onChange:g,options:y,hideCancelButton:!0}))},g=(0,n.createElement)(o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(a,{d:"M18.7 3H5.3C4 3 3 4 3 5.3v13.4C3 20 4 21 5.3 21h13.4c1.3 0 2.3-1 2.3-2.3V5.3C21 4 20 3 18.7 3zm.8 15.7c0 .4-.4.8-.8.8H5.3c-.4 0-.8-.4-.8-.8V5.3c0-.4.4-.8.8-.8h13.4c.4 0 .8.4.8.8v13.4zM10 15l5-3-5-3v6z"})),k=(0,n.createElement)(o,{xmlns:"http://www.w3.org/2000/svg",viewBox:"0 0 24 24"},(0,n.createElement)(a,{d:"M18.5 15v3.5H13V6.7l4.5 4.1 1-1.1-6.2-5.8-5.8 5.8 1 1.1 4-4v11.7h-6V15H4v5h16v-5z"}));function E(e){return function(e){if(Array.isArray(e))return C(e)}(e)||function(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}(e)||R(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function w(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(e,t)||R(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function R(e,t){if(e){if("string"==typeof e)return C(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?C(e,t):void 0}}function C(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}function S(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function O(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?S(Object(r),!0).forEach((function(t){_(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):S(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function _(e,t,r){return t in e?Object.defineProperty(e,t,{value:r,enumerable:!0,configurable:!0,writable:!0}):e[t]=r,e}var j=wp.i18n,P=j.__,x=j.sprintf,A=wp.components,M=A.NavigableMenu,T=A.MenuItem,N=A.FormFileUpload,U=A.MenuGroup,B=A.ToolbarButton,I=A.Dropdown,L=A.SVG,F=A.Rect,D=A.Path,V=A.Button,z=A.TextControl,q=A.SelectControl,H=wp.blockEditor,W=H.MediaUpload,$=H.MediaUploadCheck,G=H.store,K=wp.data.useSelect,Y=wp.element.useState,J=wp.url.getFilename,Q=["text/vtt"],X="subtitles",Z=[{label:P("Subtitles"),value:"subtitles"},{label:P("Captions"),value:"captions"},{label:P("Descriptions"),value:"descriptions"},{label:P("Chapters"),value:"chapters"},{label:P("Metadata"),value:"metadata"}],ee=React.createElement(L,{width:"18",height:"14",viewBox:"0 0 18 14",role:"img",fill:"none"},React.createElement(F,{x:"0.75",y:"0.75",width:"16.5",height:"12.5",rx:"1.25",stroke:"black",strokeWidth:"1.5",fill:"none"}),React.createElement(D,{d:"M3 7H15",stroke:"black",strokeWidth:"1.5"}),React.createElement(D,{d:"M3 10L15 10",stroke:"black",strokeWidth:"1.5"}));function te(e){var t,r=e.tracks,n=e.onEditPress;return t=0===r.length?React.createElement("p",{className:"block-library-video-tracks-editor__tracks-informative-message"},P("Tracks can be subtitles, captions, chapters, or descriptions. They help make your content more accessible to a wider range of users.")):r.map((function(e,t){return React.createElement("div",{key:t,className:"block-library-video-tracks-editor__track-list-track"},React.createElement("span",null,e.label," "),React.createElement(V,{variant:"tertiary",onClick:function(){return n(t)},"aria-label":x(P("Edit %s"),e.label)},P("Edit")))})),React.createElement(U,{label:P("Text tracks"),className:"block-library-video-tracks-editor__track-list"},t)}function re(e){var t=e.track,r=e.onChange,n=e.onClose,a=e.onRemove,o=t.src,c=void 0===o?"":o,l=t.label,i=void 0===l?"":l,s=t.srcLang,u=void 0===s?"":s,p=t.kind,d=void 0===p?X:p,f=c.startsWith("blob:")?"":J(c)||"";return React.createElement(M,null,React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor"},React.createElement("span",{className:"block-library-video-tracks-editor__single-track-editor-edit-track-label"},P("Edit track")),React.createElement("span",null,P("File"),": ",React.createElement("b",null,f)),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-label-language"},React.createElement(z,{autoFocus:!0,onChange:function(e){return r(O(O({},t),{},{label:e}))},label:P("Label"),value:i,help:P("Title of track")}),React.createElement(z,{onChange:function(e){return r(O(O({},t),{},{srcLang:e}))},label:P("Source language"),value:u,help:P("Language tag (en, fr, etc.)")})),React.createElement(q,{className:"block-library-video-tracks-editor__single-track-editor-kind-select",options:Z,value:d,label:P("Kind"),onChange:function(e){r(O(O({},t),{},{kind:e}))}}),React.createElement("div",{className:"block-library-video-tracks-editor__single-track-editor-buttons-container"},React.createElement(V,{variant:"secondary",onClick:function(){var e={},a=!1;""===i&&(e.label=P("English"),a=!0),""===u&&(e.srcLang="en",a=!0),void 0===t.kind&&(e.kind=X,a=!0),a&&r(O(O({},t),e)),n()}},P("Close")),React.createElement(V,{isDestructive:!0,variant:"link",onClick:a},P("Remove track")))))}function ne(e){var t=e.tracks,r=void 0===t?[]:t,n=e.onChange,a=K((function(e){return e(G).getSettings().mediaUpload}),[]),o=w(Y(null),2),c=o[0],l=o[1];return a?React.createElement(I,{contentClassName:"block-library-video-tracks-editor",renderToggle:function(e){var t=e.isOpen,r=e.onToggle;return React.createElement(B,{label:P("Text tracks"),showTooltip:!0,"aria-expanded":t,"aria-haspopup":"true",onClick:r,icon:ee})},renderContent:function(e){return function(e){if(null==e)throw new TypeError("Cannot destructure undefined")}(e),null!==c?React.createElement(re,{track:r[c],onChange:function(e){var t=E(r);t[c]=e,n(t)},onClose:function(){return l(null)},onRemove:function(){n(r.filter((function(e,t){return t!==c}))),l(null)}}):React.createElement(React.Fragment,null,React.createElement(M,null,React.createElement(te,{tracks:r,onEditPress:l}),React.createElement(U,{className:"block-library-video-tracks-editor__add-tracks-container",label:P("Add tracks")},React.createElement(W,{onSelect:function(e){var t=e.url,a=r.length;n([].concat(E(r),[{src:t}])),l(a)},allowedTypes:Q,render:function(e){var t=e.open;return React.createElement(T,{icon:g,onClick:t},P("Open Media Library"))}}),React.createElement($,null,React.createElement(N,{onChange:function(e){var t=e.target.files,o=r.length;a({allowedTypes:Q,filesList:t,onFileChange:function(e){var t=w(e,1)[0].url,a=E(r);a[o]||(a[o]={}),a[o]=O(O({},r[o]),{},{src:t}),n(a),l(o)}})},accept:".vtt,text/vtt",render:function(e){var t=e.openFileDialog;return React.createElement(T,{icon:k,onClick:function(){t()}},P("Upload"))}})))))}}):null}function ae(){return ae=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)Object.prototype.hasOwnProperty.call(r,n)&&(e[n]=r[n])}return e},ae.apply(this,arguments)}function oe(e){var t=e.tracks;return(void 0===t?[]:t).map((function(e){return React.createElement("track",ae({key:e.src},e))}))}function ce(e,t){(null==t||t>e.length)&&(t=e.length);for(var r=0,n=new Array(t);r<t;r++)n[r]=e[r];return n}var le=wp.blob,ie=le.getBlobByURL,se=le.isBlobURL,ue=wp.components,pe=ue.BaseControl,de=ue.Button,fe=ue.Disabled,me=ue.PanelBody,ve=ue.Spinner,be=ue.withNotices,ye=wp.blockEditor,he=ye.BlockControls,ge=ye.BlockIcon,ke=ye.InspectorControls,Ee=ye.MediaPlaceholder,we=ye.MediaUpload,Re=ye.MediaUploadCheck,Ce=ye.MediaReplaceFlow,Se=ye.RichText,Oe=ye.useBlockProps,_e=ye.store,je=wp.element,Pe=je.useRef,xe=je.useEffect,Ae=wp.i18n,Me=Ae.__,Te=Ae.sprintf,Ne=wp.compose.useInstanceId,Ue=wp.data.useSelect,Be=wp.blocks.createBlock,Ie=["video"],Le=["image"];const Fe=be((function e(r){var n=r.isSelected,a=r.noticeUI,o=r.attributes,l=r.className,i=r.setAttributes,s=r.insertBlocksAfter,u=(r.onReplace,r.noticeOperations),p=Ne(e),d=Pe(),f=Pe(),m=o.id,v=o.caption,b=o.controls,y=o.poster,g=o.src,k=o.tracks,E=!m&&se(g),w=Ue((function(e){return e(_e).getSettings().mediaUpload}),[]);function R(e){var t,r;e&&e.url?i({src:e.url,id:e.id,poster:(null===(t=e.image)||void 0===t?void 0:t.src)!==e.icon?null===(r=e.image)||void 0===r?void 0:r.src:void 0}):i({src:void 0,id:void 0,poster:void 0})}function C(e){e!==g&&i({src:e,id:void 0,poster:void 0})}function S(e){u.removeAllNotices(),u.createErrorNotice(e)}xe((function(){if(!m&&se(g)){var e=ie(g);e&&w({filesList:[e],onFileChange:function(e){return R((t=e,r=1,function(e){if(Array.isArray(e))return e}(t)||function(e,t){var r=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=r){var n,a,o=[],c=!0,l=!1;try{for(r=r.call(e);!(c=(n=r.next()).done)&&(o.push(n.value),!t||o.length!==t);c=!0);}catch(e){l=!0,a=e}finally{try{c||null==r.return||r.return()}finally{if(l)throw a}}return o}}(t,r)||function(e,t){if(e){if("string"==typeof e)return ce(e,t);var r=Object.prototype.toString.call(e).slice(8,-1);return"Object"===r&&e.constructor&&(r=e.constructor.name),"Map"===r||"Set"===r?Array.from(e):"Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r)?ce(e,t):void 0}}(t,r)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}())[0]);var t,r},onError:function(e){u.createErrorNotice(e)},allowedTypes:Ie})}}),[]),xe((function(){d.current&&d.current.load()}),[y]);var O=t()(l,{"is-transient":E}),_=Oe({className:O});if(!g)return React.createElement("div",_,React.createElement(Ee,{icon:React.createElement(ge,{icon:c}),onSelect:R,onSelectURL:C,accept:"video/*",allowedTypes:Ie,value:o,notices:a,onError:S}));var j="video-block__poster-image-description-".concat(p);return React.createElement(React.Fragment,null,React.createElement(he,{group:"block"},React.createElement(ne,{tracks:k,onChange:function(e){i({tracks:e})}})),React.createElement(he,{group:"other"},React.createElement(Ce,{mediaId:m,mediaURL:g,allowedTypes:Ie,accept:"video/*",onSelect:R,onSelectURL:C,onError:S})),React.createElement(ke,null,React.createElement(me,{title:Me("Settings")},React.createElement(h,{setAttributes:i,attributes:o}),React.createElement(Re,null,React.createElement(pe,{className:"editor-video-poster-control"},React.createElement(pe.VisualLabel,null,Me("Poster image")),React.createElement(we,{title:Me("Select poster image"),onSelect:function(e){i({poster:e.url})},allowedTypes:Le,render:function(e){var t=e.open;return React.createElement(de,{variant:"primary",onClick:t,ref:f,"aria-describedby":j},Me(y?"Replace":"Select"))}}),React.createElement("p",{id:j,hidden:!0},y?Te(Me("The current poster image url is %s"),y):Me("There is no poster image currently selected")),!!y&&React.createElement(de,{onClick:function(){i({poster:void 0}),f.current.focus()},variant:"tertiary"},Me("Remove")))))),React.createElement("figure",_,React.createElement(fe,{isDisabled:!n},React.createElement("video",{controls:b,poster:y,src:g,ref:d},React.createElement(oe,{tracks:k}))),E&&React.createElement(ve,null),(!Se.isEmpty(v)||n)&&React.createElement(Se,{tagName:"figcaption","aria-label":Me("Video caption text"),placeholder:Me("Add caption"),value:v,onChange:function(e){return i({caption:e})},inlineToolbar:!0,__unstableOnSplitAtEnd:function(){return s(Be("core/paragraph"))}})))}));var De=wp.blob.createBlobURL,Ve=wp.blocks.createBlock;const ze={from:[{type:"files",isMatch:function(e){return 1===e.length&&0===e[0].type.indexOf("video/")},transform:function(e){var t=e[0];return Ve("straightvisions/sv-cloudflare-stream",{src:De(t)})}},{type:"shortcode",tag:"video",attributes:{src:{type:"string",shortcode:function(e){var t=e.named,r=t.src,n=t.mp4,a=t.m4v,o=t.webm,c=t.ogv,l=t.flv;return r||n||a||o||c||l}},poster:{type:"string",shortcode:function(e){return e.named.poster}},loop:{type:"string",shortcode:function(e){return e.named.loop}},autoplay:{type:"string",shortcode:function(e){return e.named.autoplay}},preload:{type:"string",shortcode:function(e){return e.named.preload}}}}]};var qe=wp.blocks.registerBlockType,He=wp.i18n.__;console.log(wp),qe("straightvisions/sv-cloudflare-stream",{title:"SV Cloudflare Stream",example:{attributes:{src:"https://upload.wikimedia.org/wikipedia/commons/c/ca/Wood_thrush_in_Central_Park_switch_sides_%2816510%29.webm",caption:He("Wood thrush singing in Central Park, NYC.")}},transforms:ze,edit:Fe,save:function(){return React.createElement("p",null)}})})()})();